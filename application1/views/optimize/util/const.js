define(["jquery","spin"],function($,Spinner){var constUtil={domain:"http://"+window.location.host+"/",lastUrl:"last_url",resultSuccess:0,resultFailure:1,ajaxCheckEmail:"user/checkemail.php",ajaxUserRegister:"user/operate.php",webProtocol:"user_protocol.html",promptUserInvalid:100,template:"templates/",absUrl:function(e){return this.domain+e},isJsonSuccess:function(e){return+e.result===this.resultSuccess&&e.result!==null},isJsonFailure:function(e){return+e.result===this.resultFailure},isRelogin:function(e){return e.code===this.apiCodeKeyRelogin},redirectLogin:function(){location.href=this.absUrl(this.webUserLogin)},redirectLastUrl:function(){var e=$.cookie(this.lastUrl);e=e?e:this.domain,location.href=e},evalStrJson:function(json){if(!json)return{};var data=(0,eval)("("+json+")");return data},setReloadTimeout:function(e,t){var n=!!e;setTimeout(function(){t?location.href=t:location.reload()},n?e:1e3)},setMyTimeout:function(e,t,n){var r=!!e,i=[].slice.call(arguments,3);setTimeout(function(){typeof t=="function"&&t.apply(n,i)},r?e:1e3)},showJsonPrompt:function(json,fn,context){this.stopAjaxLoading();var data;json?data=(0,eval)("("+json+")"):data={msg:"",code:"",result:1};var params=[data];return function(){params=params.concat([].slice.call(arguments,0)),fn&&fn.apply(context,params)}},showAjaxLoading:function(e){var t=$(e).offset().left,n=$(e).offset().top,r=$(e).width(),i=$(e).height(),s={lines:9,length:0,width:10,radius:15,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:81,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"};$("#ajax_spin").remove(),$("body").append('<div id="ajax_spin" style="position:absolute;background:#FFF;filter:alpha(opacity=30);opacity:0.3"><div id="ajax_spin_inner" style="position:relative;height:50px;"></div></div>'),$("#ajax_spin").css({top:n,left:t,width:r,height:i});var o=document.getElementById("ajax_spin_inner"),u=(new Spinner(s)).spin(o)},stopAjaxLoading:function(){$("#ajax_spin").remove()},showValidateHtmlPrompt:function(e,t){return t?($("#"+e).html(t),!1):!0}};return constUtil});